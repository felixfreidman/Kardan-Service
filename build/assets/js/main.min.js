"use strict";function closeAppliedForm(){var e=document.getElementById("closeAppliedForm"),t=document.querySelector(".dark-layer");e.addEventListener("click",function(){t.classList.toggle("js--hidden")})}function inputAuthorization(){document.querySelectorAll(".form-input").forEach(function(e){var t;e.value||(t=addWarningEmptySpan(),e.classList.add("form-input--warning"),e=e.id,document.querySelector("[for=".concat(e,"]")).appendChild(t))})}function addWarningEmptySpan(){var e=document.createElement("span");return e.classList.add("empty--input"),e}function deleteWarningSpans(){document.querySelectorAll(".form-input").forEach(function(t){t.addEventListener("input",function(){var e=t.id,e=document.querySelector("[for=".concat(e,"]"));e.querySelector(".empty--input")&&(e.querySelector(".empty--input").remove(),t.classList.remove("form-input--warning"))})})}var cardsArray,createServiceTotal,_updateUserOrderField,updateTotalNumber,orderList,bookedItems,darkLayer,applyBtn,closeForm,applyFormScreen;function updateUserOrderField(){var e=document.getElementById("userOrder"),t=document.querySelectorAll(".order-item"),r=document.getElementById("orderTotalPrice").textContent,n="";t.forEach(function(e){var t=e.querySelector(".order-item__name").textContent,e=e.querySelector(".order-item__price").textContent;n="".concat(n," ").concat(t," - ").concat(e,".  ")});r="Всего: ".concat(r);n+=r,e.value=n}function makeCardsLink(){document.querySelectorAll(".container-card").forEach(function(t){t.addEventListener("click",function(){var e=t.dataset.href;window.location.href=e})})}$(function(){$("#orderForm").on("submit",function(e){e.preventDefault();var t=$("#userName").val(),r=$("#userPhone").val(),n=$("#userEmail").val(),e=$("#userOrder").val(),o=document.querySelector(".order-button");o.textContent="Подтверждаем",$.ajax({type:"post",url:"/wp-admin/admin-ajax.php",data:{action:"ajax_form",name:t,phone:r,mail:n,order:e},success:function(e){o.textContent=e,setTimeout(function(){window.location.href="https://parovoz.yurin.biz/services"},1200)}})})}),$(function(){$(".apply-form").on("submit",function(e){e.preventDefault();var t=$("#reviewName").val(),r=$("#description").val(),n=$("#starRatingInput").val(),e=$("#bathTypeSelect").val();document.querySelector(".form-button").textContent="Подтверждаем",$.ajax({type:"post",url:"/wp-admin/admin-ajax.php",data:{action:"review_form",name:t,description:r,rating:n,bathType:e},success:function(e){$(".dark-layer").html(e),closeAppliedForm()}})})}),$(".order-button").on("click",function(){inputAuthorization()}),deleteWarningSpans(),Storage.prototype.setObj=function(e,t){return this.setItem(e,JSON.stringify(t))},Storage.prototype.getObj=function(e){return JSON.parse(this.getItem(e))},document.querySelector(".article-card")&&(cardsArray=document.querySelectorAll(".article-card")).forEach(function(t){t.addEventListener("mouseover",function(){var e=(e=t.style.background).replace("linear-gradient(360deg, rgba(26, 47, 68, 0.9) 0%, rgba(26, 47, 68, 0) 100%)","linear-gradient( 360deg, rgba(212, 37, 21, 0.8) 0%, rgba(212, 37, 21, 0) 100%)");t.style.background=e}),t.addEventListener("mouseout",function(){var e=(e=t.style.background).replace("linear-gradient(360deg, rgba(212, 37, 21, 0.8) 0%, rgba(212, 37, 21, 0) 100%)","linear-gradient(360deg, rgba(26, 47, 68, 0.9) 0%, rgba(26, 47, 68, 0) 100%)");t.style.background=e})}),document.getElementById("orderDate")&&(document.getElementById("orderDate").valueAsDate=new Date),window.location.href.includes("book")&&$(document).ready(function(){$("#userPhone").inputmask()}),document.querySelector(".container-card")&&setTimeout(makeCardsLink,300),window.location.href.includes("cart")&&(createServiceTotal=function(e,t,r){return'\n      <div class="order-item order-item--service" id="totalOrderID'.concat(r,'">\n        <div class="order-item__name" id="orderServiceName">').concat(e,'</div>\n        <div class="order-item__bar"> </div>\n        <div class="order-item__price" id="orderServicePrice">').concat(t," <span>₽</span></div>\n    </div>\n    ")},_updateUserOrderField=function(){var e=document.getElementById("userOrder"),t=document.querySelectorAll(".order-item"),r=document.getElementById("orderTotalPrice").textContent,n="";t.forEach(function(e){var t=e.querySelector(".order-item__name").textContent,e=e.querySelector(".order-item__price").textContent;n="".concat(n," ").concat(t," - ").concat(e,".  ")});r="Всего: ".concat(r);n+=r,e.value=n,console.log(e.value)},updateTotalNumber=function(){var e,t,r;document.querySelectorAll(".order-item__price")?(e=document.querySelectorAll(".order-item__price"),t=document.getElementById("orderTotalPrice"),r=0,e.forEach(function(e){e=parseInt(e.textContent);r+=e}),t.childNodes[0].nodeValue=r+" "):document.getElementById("orderTotalPrice").childNodes[0].nodeValue="0 "},orderList=document.querySelector(".order-list"),(bookedItems=document.querySelectorAll(".order-container")).forEach(function(e,t){var r=e.querySelector(".order-header").querySelector("a").textContent,e=e.querySelector(".order-cost").querySelector("span").querySelector("bdi").textContent;e=(e=e.match(/\d+/g))[0]+"";t=createServiceTotal(r,e,t);orderList.insertAdjacentHTML("beforeend",t)}),setTimeout(updateTotalNumber,100),setTimeout(_updateUserOrderField,100),$(document).ready(function(){$("#userPhone").inputmask()})),document.querySelector(".add-feedback")&&(darkLayer=document.querySelector(".dark-layer"),applyBtn=document.querySelector(".add-feedback"),closeForm=document.getElementById("closeForm"),applyFormScreen=document.getElementById("applyForm"),applyBtn.addEventListener("click",function(){darkLayer.classList.toggle("js--hidden")}),closeForm.addEventListener("click",function(){darkLayer.classList.toggle("js--hidden")}),window.onclick=function(e){e.target==darkLayer&&darkLayer.classList.toggle("js--hidden")});var reviews,ns="http://www.w3.org/2000/svg";document.querySelector(".feedback-item")&&(reviews=document.querySelectorAll(".feedback-item")).forEach(function(e){var t=e.querySelector(".feedback-item__content").textContent,r=e.querySelector(".feedback-item__caption"),n=e.querySelector(".amount"),o=t.substring(t.indexOf("star")-1,t.indexOf("star")),a=t.substring(t.indexOf("bath")-3,t.indexOf("bath"));switch(t=(t=t.replace("".concat(a,"bath"),"")).replace("".concat(o,"star"),""),e.querySelector(".feedback-item__content").textContent=t,n.textContent=o,r.textContent=a){case"Ура":r.textContent="Уральская";break;case"Охо":r.textContent="Охотничья";break;case"Ямс":r.textContent="Ямская";break;case"Рыб":r.textContent="Рыбацкая";break;case"Раз":r.textContent="Раздольная";break;case"Сем":r.textContent="Семейная";break;case"Сиб":r.textContent="Сибирская";break;case"Лес":r.textContent="Лесная";break;case"Хут":r.textContent="Хуторок"}var c=e.querySelector(".feedback-item__rating").querySelector("svg");switch(o){case"1":for(var i=0;i<5-parseInt(o);i++)c.removeChild(e.querySelector("svg use"));for(var s=0;s<5-parseInt(o);s++){var d=document.createElementNS(ns,"use");d.setAttribute("href","#stars-empty-star"),c.appendChild(d)}break;case"2":for(var l=0;l<5-parseInt(o);l++)c.removeChild(e.querySelector("svg use"));for(var u=0;u<5-parseInt(o);u++){var m=document.createElementNS(ns,"use");m.setAttribute("href","#stars-empty-star"),c.appendChild(m)}break;case"3":for(var p=0;p<5-parseInt(o);p++)c.removeChild(e.querySelector("svg use"));for(var f=1;f<=5-parseInt(o);f++){var v=document.createElementNS(ns,"use");v.setAttribute("href","#stars-empty-star"),c.appendChild(v)}break;case"4":for(var g=0;g<5-parseInt(o);g++)c.removeChild(e.querySelector("svg use"));for(var y=1;y<=5-parseInt(o);y++){var h=document.createElementNS(ns,"use");h.setAttribute("href","#stars-empty-star"),c.appendChild(h)}break;case"5":for(var b=0;b<5-parseInt(o);b++)c.removeChild(e.querySelector("svg use"));for(var S=1;S<=5-parseInt(o);S++){var w=document.createElementNS(ns,"use");w.setAttribute("href","#stars-empty-star"),c.appendChild(w)}}});var form,select,greetingSwiper=new Swiper("#greetingSwiper",{direction:"horizontal",loop:!0,pagination:{el:".swiper-pagination",clickable:!0},navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"}}),menuTogglers=document.querySelectorAll(".content-toggler"),screens=document.querySelectorAll(".adaptive-screen"),menuButtons=document.querySelectorAll(".button-toggler");function showScreen(t){screens.forEach(function(e){e.classList.contains("screen-active")&&(e.classList.remove("screen-active"),e.classList.add("screen-hidden")),e.id.includes(t)&&(e.classList.add("screen-active"),e.classList.remove("screen-hidden"))})}function filterFeedbacksByRating(){var e=document.querySelectorAll(".feedback-item");$("#slider").slider("values");e.forEach(function(e){e.querySelector(".amount").textContent!=$("#starRating").val()?e.classList.add("js--hidden"):e.classList.remove("js--hidden")})}function filterFeedbacksByName(t){document.querySelectorAll(".feedback-item").forEach(function(e){e.querySelector(".feedback-item__caption").textContent!=t?e.classList.add("js--hidden"):e.classList.remove("js--hidden")})}menuTogglers.forEach(function(e){e.addEventListener("click",function(){menuTogglers.forEach(function(e){e.classList.contains("content-toggler--active")&&e.classList.remove("content-toggler--active")}),e.classList.add("content-toggler--active"),showScreen(e.id),menuButtons.forEach(function(e){e.classList.contains("button-toggler--active")&&e.classList.remove("button-toggler--active");e=e.id;e.includes("service")&&document.getElementById(e).classList.add("button-toggler--active")})})}),menuButtons.forEach(function(e){e.addEventListener("click",function(){console.log("clicked"),menuButtons.forEach(function(e){e.classList.contains("button-toggler--active")&&(console.log("changed"),e.classList.remove("button-toggler--active"))}),e.classList.contains("button-toggler--active")||e.classList.add("button-toggler--active"),e.id.includes("service")?(showScreen("kardan"),menuTogglers.forEach(function(e){e.classList.contains("content-toggler--active")&&e.classList.remove("content-toggler--active")}),document.getElementById("kardan").classList.add("content-toggler--active")):showScreen("shop")})}),jQuery("#slider").slider({animate:"fast",max:5,min:1,step:1,range:!0,values:[1,5],slide:function(e,t){$("#starRating").val(t.value),$(".controls-section__button").removeClass("js--hidden"),filterFeedbacksByRating()}}),document.getElementById("ratingForm")&&(form=document.getElementById("ratingForm"),select=document.getElementById("bathType"),form.addEventListener("reset",function(){$("#slider").slider("values",[1,5]),$(".controls-section__button").addClass("js--hidden"),document.querySelectorAll(".feedback-item").forEach(function(e){e.classList.remove("js--hidden")})}),select.addEventListener("change",function(){$(".controls-section__button").removeClass("js--hidden"),filterFeedbacksByName($(select).val())}));var swiper=new Swiper("#workerSwiper",{direction:"horizontal",loop:!0,speed:400,spaceBetween:34,effect:"cards",slidesPerView:"4",swipeHandler:".swiper-wrapper"}),swiperImages=document.querySelectorAll(".bathroom-preview"),imgLinkArray=new Array,returnValue=0;swiperImages.forEach(function(e){e=e.src.replace("http://localhost:3000","."),e='<img class="swiper-preview swiper-pagination-bullet" src='.concat(e,">");imgLinkArray.push(e)});var fancySwiper=new Swiper("#fancySwiper",{direction:"horizontal",loop:!0,speed:500,spaceBetween:34,effect:"fade",fadeEffect:{crossFade:!0},slidesPerView:"1",swipeHandler:".swiper-wrapper",pagination:{el:".swiper-pagination",clickable:!0,renderBullet:function(e){return imgLinkArray[e]}}}),cafeSwiper=new Swiper("#cafeSwiper",{direction:"horizontal",loop:!1,speed:400,spaceBetween:24,effect:"cards",slidesPerView:"2",pagination:{el:".swiper-pagination",clickable:!0},navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"}}),actionSwiper=new Swiper("#actionSwiper",{direction:"horizontal",loop:!0,speed:400,spaceBetween:24,effect:"cards",slidesPerView:"2",navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"}});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFqYXguanMiLCJjb21tb24uanMiLCJmZWVkYmFjay5qcyIsInN3aXBlci5qcyJdLCJuYW1lcyI6WyJjbG9zZUFwcGxpZWRGb3JtIiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50QnlJZCIsImRhcmtMYXllcl9fbG9jYWwiLCJxdWVyeVNlbGVjdG9yIiwiYWRkRXZlbnRMaXN0ZW5lciIsImNsYXNzTGlzdCIsInRvZ2dsZSIsImlucHV0QXV0aG9yaXphdGlvbiIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJmb3JFYWNoIiwiaW5wdXQiLCJzcGFuIiwidmFsdWUiLCJhZGRXYXJuaW5nRW1wdHlTcGFuIiwiYWRkIiwiaW5wdXRJRCIsImlkIiwiY29uY2F0IiwiYXBwZW5kQ2hpbGQiLCJ3YXJuaW5nRW1wdHlTcGFuIiwiY3JlYXRlRWxlbWVudCIsImRlbGV0ZVdhcm5pbmdTcGFucyIsImlucHV0TGFiZWwiLCJyZW1vdmUiLCJjYXJkc0FycmF5IiwiY3JlYXRlU2VydmljZVRvdGFsIiwidXBkYXRlVXNlck9yZGVyRmllbGQiLCJ1cGRhdGVUb3RhbE51bWJlciIsIm9yZGVyTGlzdCIsImJvb2tlZEl0ZW1zIiwiZGFya0xheWVyIiwiYXBwbHlCdG4iLCJjbG9zZUZvcm0iLCJhcHBseUZvcm1TY3JlZW4iLCJ1c2VyT3JkZXJGaWVsZCIsInVzZXJPcmRlckxpc3QiLCJ0b3RhbFByaWNlIiwidGV4dENvbnRlbnQiLCJvcmRlclN0cmluZyIsIm9yZGVyIiwib3JkZXJOYW1lIiwib3JkZXJQcmljZSIsInRvdGFsU3RyaW5nIiwibWFrZUNhcmRzTGluayIsImNhcmQiLCJsaW5rIiwiZGF0YXNldCIsImhyZWYiLCJ3aW5kb3ciLCJsb2NhdGlvbiIsIiQiLCJvbiIsImUiLCJwcmV2ZW50RGVmYXVsdCIsIm5hbWUiLCJ2YWwiLCJwaG9uZSIsIm1haWwiLCJvcmRlckJ1dHRvbiIsImFqYXgiLCJ0eXBlIiwidXJsIiwiZGF0YSIsImFjdGlvbiIsInN1Y2Nlc3MiLCJyZXNwb25zZSIsInNldFRpbWVvdXQiLCJkZXNjcmlwdGlvbiIsInJhdGluZyIsImJhdGhUeXBlIiwiaHRtbCIsIlN0b3JhZ2UiLCJwcm90b3R5cGUiLCJzZXRPYmoiLCJrZXkiLCJvYmoiLCJ0aGlzIiwic2V0SXRlbSIsIkpTT04iLCJzdHJpbmdpZnkiLCJnZXRPYmoiLCJwYXJzZSIsImdldEl0ZW0iLCJiYWNrZ3JvdW5kIiwic3R5bGUiLCJyZXBsYWNlIiwidmFsdWVBc0RhdGUiLCJEYXRlIiwiaW5jbHVkZXMiLCJyZWFkeSIsImlucHV0bWFzayIsInByaWNlIiwiY29uc29sZSIsImxvZyIsImFsbE9yZGVyc051bXMiLCJ0b3RhbE51bSIsInRvdGFsU3VtIiwicmVhbFByaWNlIiwicGFyc2VJbnQiLCJjaGlsZE5vZGVzIiwibm9kZVZhbHVlIiwiaW5kZXgiLCJzZXJ2aWNlTmFtZSIsInNlcnZpY2VQcmljZSIsIm1hdGNoIiwidG90YWxPcmRlciIsImluc2VydEFkamFjZW50SFRNTCIsIm9uY2xpY2siLCJldmVudCIsInRhcmdldCIsInJldmlld3MiLCJucyIsInJldmlldyIsInJldmlld19jb250ZW50IiwiYmF0aF90eXBlX25hbWUiLCJzdGFyX3JhdGluZ19hbW91bnQiLCJzdGFyX3JhdGluZyIsInN1YnN0cmluZyIsImluZGV4T2YiLCJiYXRoX3R5cGUiLCJyZXZpZXdTdGFycyIsImkiLCJyZW1vdmVDaGlsZCIsInVzZUVsZW1lbnQiLCJjcmVhdGVFbGVtZW50TlMiLCJzZXRBdHRyaWJ1dGUiLCJmb3JtIiwic2VsZWN0IiwiZ3JlZXRpbmdTd2lwZXIiLCJTd2lwZXIiLCJkaXJlY3Rpb24iLCJsb29wIiwicGFnaW5hdGlvbiIsImVsIiwiY2xpY2thYmxlIiwibmF2aWdhdGlvbiIsIm5leHRFbCIsInByZXZFbCIsIm1lbnVUb2dnbGVycyIsInNjcmVlbnMiLCJtZW51QnV0dG9ucyIsInNob3dTY3JlZW4iLCJ0b2dnbGVySUQiLCJzY3JlZW4iLCJjb250YWlucyIsImZpbHRlckZlZWRiYWNrc0J5UmF0aW5nIiwiYWxsRmVlZGJhY2tzIiwic2xpZGVyIiwiZmVlZGJhY2siLCJmaWx0ZXJGZWVkYmFja3NCeU5hbWUiLCJjaGVja2VkVmFsdWUiLCJ0b2dnbGVyIiwiYnV0dG9uIiwiYnV0dG9uSUQiLCJzcGVjaWFsQnV0dG9uIiwialF1ZXJ5IiwiYW5pbWF0ZSIsIm1heCIsIm1pbiIsInN0ZXAiLCJyYW5nZSIsInZhbHVlcyIsInNsaWRlIiwidWkiLCJyZW1vdmVDbGFzcyIsImFkZENsYXNzIiwic3dpcGVyIiwic3BlZWQiLCJzcGFjZUJldHdlZW4iLCJlZmZlY3QiLCJzbGlkZXNQZXJWaWV3Iiwic3dpcGVIYW5kbGVyIiwic3dpcGVySW1hZ2VzIiwiaW1nTGlua0FycmF5IiwiQXJyYXkiLCJyZXR1cm5WYWx1ZSIsImltYWdlIiwiaW1hZ2VTcmMiLCJzcmMiLCJwdXNoIiwiZmFuY3lTd2lwZXIiLCJmYWRlRWZmZWN0IiwiY3Jvc3NGYWRlIiwicmVuZGVyQnVsbGV0IiwiY2FmZVN3aXBlciIsImFjdGlvblN3aXBlciJdLCJtYXBwaW5ncyI6ImFBeURBLFNBQUFBLG1CQUNBLElBQUFBLEVBQUFDLFNBQUFDLGVBQUEsb0JBQ0FDLEVBQUFGLFNBQUFHLGNBQUEsZUFDQUosRUFBQUssaUJBQUEsUUFBQSxXQUNBRixFQUFBRyxVQUFBQyxPQUFBLGdCQVNBLFNBQUFDLHFCQUNBUCxTQUFBUSxpQkFBQSxlQUNBQyxRQUFBLFNBQUFDLEdBQ0EsSUFDQUMsRUFEQUQsRUFBQUUsUUFDQUQsRUFBQUUsc0JBQ0FILEVBQUFMLFVBQUFTLElBQUEsdUJBQ0FDLEVBQUFMLEVBQUFNLEdBQ0FoQixTQUFBRyxjQUFBLFFBQUFjLE9BQUFGLEVBQUEsTUFDQUcsWUFBQVAsTUFNQSxTQUFBRSxzQkFDQSxJQUFBTSxFQUFBbkIsU0FBQW9CLGNBQUEsUUFFQSxPQURBRCxFQUFBZCxVQUFBUyxJQUFBLGdCQUNBSyxFQUdBLFNBQUFFLHFCQUNBckIsU0FBQVEsaUJBQUEsZUFDQUMsUUFBQSxTQUFBQyxHQUNBQSxFQUFBTixpQkFBQSxRQUFBLFdBQ0EsSUFBQVcsRUFB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LEdBQ0FDLE9BQUEsUUFDQUMsY0FBQSxJQUdBbkMsV0FBQSxDQUNBQyxPQUFBLHNCQUNBQyxPQUFBIiwiZmlsZSI6Im1haW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIvLyBBSkFYLdC30LDQv9GA0L7RgSDQtNC70Y8g0L7RgtC/0YDQsNCy0LrQuCDRgdC+0L7QsdGJ0LXQvdC40Lkg0L3QsCDQv9C+0YfRgtGDLCDQutC+0YLQvtGA0LDRjyDRg9C60LDQt9Cw0L3QsCDQsiDQsNC00LzQuNC90LrQtSDRgdCw0LnRgtCwXG4kKGZ1bmN0aW9uICgpIHtcbiAgICAkKFwiI29yZGVyRm9ybVwiKS5vbihcInN1Ym1pdFwiLCBmdW5jdGlvbiAoZSkge1xuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIHZhciBuYW1lID0gJChcIiN1c2VyTmFtZVwiKS52YWwoKTtcbiAgICAgICAgdmFyIHBob25lID0gJChcIiN1c2VyUGhvbmVcIikudmFsKCk7XG4gICAgICAgIHZhciBtYWlsID0gJChcIiN1c2VyRW1haWxcIikudmFsKCk7XG4gICAgICAgIHZhciBvcmRlciA9ICQoXCIjdXNlck9yZGVyXCIpLnZhbCgpO1xuICAgICAgICB2YXIgb3JkZXJCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcub3JkZXItYnV0dG9uJyk7XG4gICAgICAgIG9yZGVyQnV0dG9uLnRleHRDb250ZW50ID0gXCLQn9C+0LTRgtCy0LXRgNC20LTQsNC10LxcIjtcblxuICAgICAgICAkLmFqYXgoe1xuICAgICAgICAgICAgdHlwZTogXCJwb3N0XCIsXG4gICAgICAgICAgICB1cmw6IFwiL3dwLWFkbWluL2FkbWluLWFqYXgucGhwXCIsXG4gICAgICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICAgICAgYWN0aW9uOiBcImFqYXhfZm9ybVwiLFxuICAgICAgICAgICAgICAgIG5hbWU6IG5hbWUsXG4gICAgICAgICAgICAgICAgcGhvbmU6IHBob25lLFxuICAgICAgICAgICAgICAgIG1haWw6IG1haWwsXG4gICAgICAgICAgICAgICAgb3JkZXI6IG9yZGVyLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uIChyZXNwb25zZSkge1xuICAgICAgICAgICAgICAgIG9yZGVyQnV0dG9uLnRleHRDb250ZW50ID0gcmVzcG9uc2U7XG4gICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gXCJodHRwczovL3Bhcm92b3oueXVyaW4uYml6L3NlcnZpY2VzXCI7XG4gICAgICAgICAgICAgICAgfSwgMTIwMCk7XG4gICAgICAgICAgICB9LFxuICAgICAgICB9KTtcbiAgICB9KTtcbn0pO1xuJChmdW5jdGlvbiAoKSB7XG4gICAgJChcIi5hcHBseS1mb3JtXCIpLm9uKFwic3VibWl0XCIsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgdmFyIG5hbWUgPSAkKFwiI3Jldmlld05hbWVcIikudmFsKCk7XG4gICAgICAgIHZhciBkZXNjcmlwdGlvbiA9ICQoXCIjZGVzY3JpcHRpb25cIikudmFsKCk7XG4gICAgICAgIHZhciByYXRpbmcgPSAkKFwiI3N0YXJSYXRpbmdJbnB1dFwiKS52YWwoKTtcbiAgICAgICAgdmFyIGJhdGhUeXBlID0gJChcIiNiYXRoVHlwZVNlbGVjdFwiKS52YWwoKTtcbiAgICAgICAgdmFyIG9yZGVyQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmZvcm0tYnV0dG9uJyk7XG4gICAgICAgIG9yZGVyQnV0dG9uLnRleHRDb250ZW50ID0gXCLQn9C+0LTRgtCy0LXRgNC20LTQsNC10LxcIjtcblxuICAgICAgICAkLmFqYXgoe1xuICAgICAgICAgICAgdHlwZTogXCJwb3N0XCIsXG4gICAgICAgICAgICB1cmw6IFwiL3dwLWFkbWluL2FkbWluLWFqYXgucGhwXCIsXG4gICAgICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICAgICAgYWN0aW9uOiBcInJldmlld19mb3JtXCIsXG4gICAgICAgICAgICAgICAgbmFtZTogbmFtZSxcbiAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogZGVzY3JpcHRpb24sXG4gICAgICAgICAgICAgICAgcmF0aW5nOiByYXRpbmcsXG4gICAgICAgICAgICAgICAgYmF0aFR5cGU6IGJhdGhUeXBlXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICAgICAgJChcIi5kYXJrLWxheWVyXCIpLmh0bWwocmVzcG9uc2UpO1xuICAgICAgICAgICAgICAgIGNsb3NlQXBwbGllZEZvcm0oKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH0pO1xuICAgIH0pO1xufSk7XG5mdW5jdGlvbiBjbG9zZUFwcGxpZWRGb3JtKCkge1xuICAgIGNvbnN0IGNsb3NlQXBwbGllZEZvcm0gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImNsb3NlQXBwbGllZEZvcm1cIik7XG4gICAgY29uc3QgZGFya0xheWVyX19sb2NhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZGFyay1sYXllclwiKTtcbiAgICBjbG9zZUFwcGxpZWRGb3JtLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICAgIGRhcmtMYXllcl9fbG9jYWwuY2xhc3NMaXN0LnRvZ2dsZShcImpzLS1oaWRkZW5cIik7XG4gICAgfSk7XG59XG4vLyDQn9GA0L7QstC10YDRj9C10LwsINGH0YLQviDQstGB0LUg0L/QvtC70Y8g0LLQsNC20L3Ri9C1INC30LDQv9C+0LvQvdC10L3Ri1xuJChcIi5vcmRlci1idXR0b25cIikub24oXCJjbGlja1wiLCBmdW5jdGlvbiAoKSB7XG4gICAgaW5wdXRBdXRob3JpemF0aW9uKCk7XG59KTtcbi8vICAgXG4vLyDQodCw0LzQsCDRhNGD0L3QutGG0LjRjyDQv9GA0L7QstC10YDQutC4INC/0L7Qu9C10Lkg0Lgg0LTQvtCx0LDQstC70LXQvdC40Y8g0LTQvtC/0L7Qu9C90LjRgtC10LvRjNC90YvRhSDRgdCy0L7QudGB0YLQsiDQv9C+0LvRjlxuZnVuY3Rpb24gaW5wdXRBdXRob3JpemF0aW9uKCkge1xuICAgIGNvbnN0IGlucHV0c0FycmF5ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5mb3JtLWlucHV0XCIpO1xuICAgIGlucHV0c0FycmF5LmZvckVhY2goKGlucHV0KSA9PiB7XG4gICAgICAgIGlmICghaW5wdXQudmFsdWUpIHtcbiAgICAgICAgICAgIGNvbnN0IHNwYW4gPSBhZGRXYXJuaW5nRW1wdHlTcGFuKCk7XG4gICAgICAgICAgICBpbnB1dC5jbGFzc0xpc3QuYWRkKFwiZm9ybS1pbnB1dC0td2FybmluZ1wiKTtcbiAgICAgICAgICAgIGNvbnN0IGlucHV0SUQgPSBpbnB1dC5pZDtcbiAgICAgICAgICAgIGNvbnN0IGlucHV0TGFiZWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGBbZm9yPSR7aW5wdXRJRH1dYCk7XG4gICAgICAgICAgICBpbnB1dExhYmVsLmFwcGVuZENoaWxkKHNwYW4pO1xuICAgICAgICB9XG4gICAgfSk7XG59XG5cbi8vINCd0LUg0YXQvtGC0LXQuyDQv9C10YDQtdCz0YDRg9C20LDRgtGMINGE0YPQvdC60YbQuNGPINC/0YDQvtCy0LXRgNC60Lgg0Lgg0L/RgNC+0YfQtdC1LCDQv9C+0Y3RgtC+0LzRgyDRgdC+0LfQtNCw0L3QuNC1INC+0YLQtNC10LvRjNC90L7Qs9C+INGB0L/QsNC90LAg0LLRi9C90LXRgSDQvtGC0LTQtdC70YzQvdC+XG5mdW5jdGlvbiBhZGRXYXJuaW5nRW1wdHlTcGFuKCkge1xuICAgIGNvbnN0IHdhcm5pbmdFbXB0eVNwYW4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic3BhblwiKTtcbiAgICB3YXJuaW5nRW1wdHlTcGFuLmNsYXNzTGlzdC5hZGQoXCJlbXB0eS0taW5wdXRcIik7XG4gICAgcmV0dXJuIHdhcm5pbmdFbXB0eVNwYW47XG59XG4vLyDQmtCw0Log0YLQvtC70YzQutC+INC/0L7Qu9GM0LfQvtCy0LDRgtC10LvRjCDRgNC10YjQuNC70YHRjyDQstCy0LXRgdGC0Lgg0LTQsNC90L3Ri9C1LCDQtdGB0LvQuCDQsdGL0LvQviDQv9GA0LXQtNGD0L/RgNC10LbQtNC10L3QuNC1INGPINGD0LTQsNC70Y/RjiDQv9GA0LXQtNGD0L/RgNC10LbQtNC10L3QuNGPINCy0YHRj9C60LjQtVxuZnVuY3Rpb24gZGVsZXRlV2FybmluZ1NwYW5zKCkge1xuICAgIGNvbnN0IGlucHV0c0FycmF5ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5mb3JtLWlucHV0XCIpO1xuICAgIGlucHV0c0FycmF5LmZvckVhY2goKGlucHV0KSA9PiB7XG4gICAgICAgIGlucHV0LmFkZEV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCAoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBpbnB1dElEID0gaW5wdXQuaWQ7XG4gICAgICAgICAgICBjb25zdCBpbnB1dExhYmVsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgW2Zvcj0ke2lucHV0SUR9XWApO1xuICAgICAgICAgICAgaWYgKGlucHV0TGFiZWwucXVlcnlTZWxlY3RvcihcIi5lbXB0eS0taW5wdXRcIikpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBjZXJ0YWluU3BhbiA9IGlucHV0TGFiZWwucXVlcnlTZWxlY3RvcihcIi5lbXB0eS0taW5wdXRcIik7XG4gICAgICAgICAgICAgICAgY2VydGFpblNwYW4ucmVtb3ZlKCk7XG4gICAgICAgICAgICAgICAgaW5wdXQuY2xhc3NMaXN0LnJlbW92ZShcImZvcm0taW5wdXQtLXdhcm5pbmdcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH0pO1xufVxuXG5kZWxldGVXYXJuaW5nU3BhbnMoKTtcblxuIiwiXG5TdG9yYWdlLnByb3RvdHlwZS5zZXRPYmogPSBmdW5jdGlvbiAoa2V5LCBvYmopIHtcbiAgcmV0dXJuIHRoaXMuc2V0SXRlbShrZXksIEpTT04uc3RyaW5naWZ5KG9iaikpXG59XG5TdG9yYWdlLnByb3RvdHlwZS5nZXRPYmogPSBmdW5jdGlvbiAoa2V5KSB7XG4gIHJldHVybiBKU09OLnBhcnNlKHRoaXMuZ2V0SXRlbShrZXkpKVxufVxuXG5pZiAoZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5hcnRpY2xlLWNhcmRcIikpIHtcbiAgY29uc3QgY2FyZHNBcnJheSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuYXJ0aWNsZS1jYXJkXCIpO1xuICBjYXJkc0FycmF5LmZvckVhY2goKGNhcmQpID0+IHtcbiAgICBjYXJkLmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZW92ZXJcIiwgKCkgPT4ge1xuICAgICAgbGV0IGJhY2tncm91bmQgPSBjYXJkLnN0eWxlLmJhY2tncm91bmQ7XG4gICAgICBiYWNrZ3JvdW5kID0gYmFja2dyb3VuZC5yZXBsYWNlKFxuICAgICAgICBcImxpbmVhci1ncmFkaWVudCgzNjBkZWcsIHJnYmEoMjYsIDQ3LCA2OCwgMC45KSAwJSwgcmdiYSgyNiwgNDcsIDY4LCAwKSAxMDAlKVwiLFxuICAgICAgICBcImxpbmVhci1ncmFkaWVudCggMzYwZGVnLCByZ2JhKDIxMiwgMzcsIDIxLCAwLjgpIDAlLCByZ2JhKDIxMiwgMzcsIDIxLCAwKSAxMDAlKVwiXG4gICAgICApO1xuICAgICAgY2FyZC5zdHlsZS5iYWNrZ3JvdW5kID0gYmFja2dyb3VuZDtcbiAgICB9KTtcbiAgICBjYXJkLmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZW91dFwiLCAoKSA9PiB7XG4gICAgICBsZXQgYmFja2dyb3VuZCA9IGNhcmQuc3R5bGUuYmFja2dyb3VuZDtcbiAgICAgIGJhY2tncm91bmQgPSBiYWNrZ3JvdW5kLnJlcGxhY2UoXG4gICAgICAgIFwibGluZWFyLWdyYWRpZW50KDM2MGRlZywgcmdiYSgyMTIsIDM3LCAyMSwgMC44KSAwJSwgcmdiYSgyMTIsIDM3LCAyMSwgMCkgMTAwJSlcIixcbiAgICAgICAgXCJsaW5lYXItZ3JhZGllbnQoMzYwZGVnLCByZ2JhKDI2LCA0NywgNjgsIDAuOSkgMCUsIHJnYmEoMjYsIDQ3LCA2OCwgMCkgMTAwJSlcIlxuICAgICAgKTtcbiAgICAgIGNhcmQuc3R5bGUuYmFja2dyb3VuZCA9IGJhY2tncm91bmQ7XG4gICAgfSk7XG4gIH0pO1xufVxuaWYgKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwib3JkZXJEYXRlXCIpKSB7XG5cbiAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ29yZGVyRGF0ZScpLnZhbHVlQXNEYXRlID0gbmV3IERhdGUoKTtcbn1cblxuZnVuY3Rpb24gdXBkYXRlVXNlck9yZGVyRmllbGQoKSB7XG4gIGNvbnN0IHVzZXJPcmRlckZpZWxkID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJ1c2VyT3JkZXJcIik7XG4gIGNvbnN0IHVzZXJPcmRlckxpc3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLm9yZGVyLWl0ZW1cIik7XG4gIGNvbnN0IHRvdGFsUHJpY2UgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcIm9yZGVyVG90YWxQcmljZVwiKS50ZXh0Q29udGVudDtcbiAgbGV0IG9yZGVyU3RyaW5nID0gJyc7XG4gIHVzZXJPcmRlckxpc3QuZm9yRWFjaChvcmRlciA9PiB7XG4gICAgY29uc3Qgb3JkZXJOYW1lID0gb3JkZXIucXVlcnlTZWxlY3RvcihcIi5vcmRlci1pdGVtX19uYW1lXCIpLnRleHRDb250ZW50O1xuICAgIGNvbnN0IG9yZGVyUHJpY2UgPSBvcmRlci5xdWVyeVNlbGVjdG9yKFwiLm9yZGVyLWl0ZW1fX3ByaWNlXCIpLnRleHRDb250ZW50O1xuICAgIG9yZGVyU3RyaW5nID0gYCR7b3JkZXJTdHJpbmd9ICR7b3JkZXJOYW1lfSAtICR7b3JkZXJQcmljZX0uICBgXG4gIH0pO1xuICBsZXQgdG90YWxTdHJpbmcgPSBg0JLRgdC10LPQvjogJHt0b3RhbFByaWNlfWA7XG4gIG9yZGVyU3RyaW5nICs9IHRvdGFsU3RyaW5nO1xuICB1c2VyT3JkZXJGaWVsZC52YWx1ZSA9IG9yZGVyU3RyaW5nO1xufVxuXG5cbmlmICh3aW5kb3cubG9jYXRpb24uaHJlZi5pbmNsdWRlcyhcImJvb2tcIikpIHtcblxuICAkKGRvY3VtZW50KS5yZWFkeShmdW5jdGlvbiAoKSB7XG4gICAgJChcIiN1c2VyUGhvbmVcIikuaW5wdXRtYXNrKCk7XG4gIH0pO1xuXG59XG5cbmlmIChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmNvbnRhaW5lci1jYXJkXCIpKSB7XG4gIHNldFRpbWVvdXQobWFrZUNhcmRzTGluaywgMzAwKVxufVxuXG5mdW5jdGlvbiBtYWtlQ2FyZHNMaW5rKCkge1xuICBjb25zdCBjYXJkcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuY29udGFpbmVyLWNhcmRcIik7XG5cbiAgY2FyZHMuZm9yRWFjaChjYXJkID0+IHtcbiAgICBjYXJkLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgY29uc3QgbGluayA9IGNhcmQuZGF0YXNldC5ocmVmO1xuICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSBsaW5rO1xuICAgIH0pXG4gIH0pXG59XG5cblxuXG5pZiAod2luZG93LmxvY2F0aW9uLmhyZWYuaW5jbHVkZXMoXCJjYXJ0XCIpKSB7XG4gIHZhciBvcmRlckxpc3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm9yZGVyLWxpc3RcIik7XG4gIGNvbnN0IGJvb2tlZEl0ZW1zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5vcmRlci1jb250YWluZXJcIilcbiAgYm9va2VkSXRlbXMuZm9yRWFjaCgob3JkZXIsIGluZGV4KSA9PiB7XG4gICAgY29uc3Qgc2VydmljZU5hbWUgPSBvcmRlci5xdWVyeVNlbGVjdG9yKCcub3JkZXItaGVhZGVyJykucXVlcnlTZWxlY3RvcihcImFcIikudGV4dENvbnRlbnQ7XG4gICAgbGV0IHNlcnZpY2VQcmljZSA9IG9yZGVyLnF1ZXJ5U2VsZWN0b3IoJy5vcmRlci1jb3N0JykucXVlcnlTZWxlY3RvcihcInNwYW5cIikucXVlcnlTZWxlY3RvcihcImJkaVwiKS50ZXh0Q29udGVudDtcbiAgICBzZXJ2aWNlUHJpY2UgPSBzZXJ2aWNlUHJpY2UubWF0Y2goL1xcZCsvZyk7XG4gICAgc2VydmljZVByaWNlID0gc2VydmljZVByaWNlWzBdICsgJyc7XG4gICAgY29uc3Qgc2VydmljZUNvdW50ZXIgPSBpbmRleDtcblxuICAgIGNvbnN0IHRvdGFsT3JkZXIgPSBjcmVhdGVTZXJ2aWNlVG90YWwoc2VydmljZU5hbWUsIHNlcnZpY2VQcmljZSwgaW5kZXgpO1xuICAgIG9yZGVyTGlzdC5pbnNlcnRBZGphY2VudEhUTUwoJ2JlZm9yZWVuZCcsIHRvdGFsT3JkZXIpO1xuICB9KVxuXG4gIGZ1bmN0aW9uIGNyZWF0ZVNlcnZpY2VUb3RhbChuYW1lLCBwcmljZSwgaWQpIHtcbiAgICBjb25zdCBIVE1MU3RyaW5nID1cbiAgICAgIGBcbiAgICAgIDxkaXYgY2xhc3M9XCJvcmRlci1pdGVtIG9yZGVyLWl0ZW0tLXNlcnZpY2VcIiBpZD1cInRvdGFsT3JkZXJJRCR7aWR9XCI+XG4gICAgICAgIDxkaXYgY2xhc3M9XCJvcmRlci1pdGVtX19uYW1lXCIgaWQ9XCJvcmRlclNlcnZpY2VOYW1lXCI+JHtuYW1lfTwvZGl2PlxuICAgICAgICA8ZGl2IGNsYXNzPVwib3JkZXItaXRlbV9fYmFyXCI+IDwvZGl2PlxuICAgICAgICA8ZGl2IGNsYXNzPVwib3JkZXItaXRlbV9fcHJpY2VcIiBpZD1cIm9yZGVyU2VydmljZVByaWNlXCI+JHtwcmljZX0gPHNwYW4+4oK9PC9zcGFuPjwvZGl2PlxuICAgIDwvZGl2PlxuICAgIGA7XG4gICAgcmV0dXJuIEhUTUxTdHJpbmc7XG4gIH1cblxuICBmdW5jdGlvbiB1cGRhdGVVc2VyT3JkZXJGaWVsZCgpIHtcbiAgICBjb25zdCB1c2VyT3JkZXJGaWVsZCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwidXNlck9yZGVyXCIpO1xuICAgIGNvbnN0IHVzZXJPcmRlckxpc3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLm9yZGVyLWl0ZW1cIik7XG4gICAgY29uc3QgdG90YWxQcmljZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwib3JkZXJUb3RhbFByaWNlXCIpLnRleHRDb250ZW50O1xuICAgIGxldCBvcmRlclN0cmluZyA9ICcnO1xuICAgIHVzZXJPcmRlckxpc3QuZm9yRWFjaChvcmRlciA9PiB7XG4gICAgICBjb25zdCBvcmRlck5hbWUgPSBvcmRlci5xdWVyeVNlbGVjdG9yKFwiLm9yZGVyLWl0ZW1fX25hbWVcIikudGV4dENvbnRlbnQ7XG4gICAgICBjb25zdCBvcmRlclByaWNlID0gb3JkZXIucXVlcnlTZWxlY3RvcihcIi5vcmRlci1pdGVtX19wcmljZVwiKS50ZXh0Q29udGVudDtcbiAgICAgIG9yZGVyU3RyaW5nID0gYCR7b3JkZXJTdHJpbmd9ICR7b3JkZXJOYW1lfSAtICR7b3JkZXJQcmljZX0uICBgXG4gICAgfSk7XG4gICAgbGV0IHRvdGFsU3RyaW5nID0gYNCS0YHQtdCz0L46ICR7dG90YWxQcmljZX1gO1xuICAgIG9yZGVyU3RyaW5nICs9IHRvdGFsU3RyaW5nO1xuICAgIHVzZXJPcmRlckZpZWxkLnZhbHVlID0gb3JkZXJTdHJpbmc7XG4gICAgY29uc29sZS5sb2codXNlck9yZGVyRmllbGQudmFsdWUpO1xuICB9XG5cbiAgZnVuY3Rpb24gdXBkYXRlVG90YWxOdW1iZXIoKSB7XG4gICAgaWYgKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIub3JkZXItaXRlbV9fcHJpY2VcIikpIHtcbiAgICAgIGNvbnN0IGFsbE9yZGVyc051bXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLm9yZGVyLWl0ZW1fX3ByaWNlXCIpO1xuICAgICAgY29uc3QgdG90YWxOdW0gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcIm9yZGVyVG90YWxQcmljZVwiKTtcbiAgICAgIGxldCB0b3RhbFN1bSA9IDA7XG4gICAgICBhbGxPcmRlcnNOdW1zLmZvckVhY2gocHJpY2UgPT4ge1xuICAgICAgICB2YXIgcmVhbFByaWNlID0gcGFyc2VJbnQocHJpY2UudGV4dENvbnRlbnQpXG4gICAgICAgIHRvdGFsU3VtICs9IHJlYWxQcmljZTtcbiAgICAgIH0pXG4gICAgICBsZXQgdG90YWxOdW1GaW5hbCA9IHRvdGFsTnVtLmNoaWxkTm9kZXNbMF07XG4gICAgICB0b3RhbE51bUZpbmFsLm5vZGVWYWx1ZSA9IHRvdGFsU3VtICsgJyAnO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgIGNvbnN0IHRvdGFsTnVtID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJvcmRlclRvdGFsUHJpY2VcIik7XG4gICAgICBsZXQgdG90YWxTdW0gPSAwO1xuICAgICAgbGV0IHRvdGFsTnVtRmluYWwgPSB0b3RhbE51bS5jaGlsZE5vZGVzWzBdO1xuICAgICAgdG90YWxOdW1GaW5hbC5ub2RlVmFsdWUgPSB0b3RhbFN1bSArICcgJztcbiAgICB9XG4gIH1cbiAgc2V0VGltZW91dCh1cGRhdGVUb3RhbE51bWJlciwgMTAwKVxuICBzZXRUaW1lb3V0KHVwZGF0ZVVzZXJPcmRlckZpZWxkLCAxMDApXG4gICQoZG9jdW1lbnQpLnJlYWR5KGZ1bmN0aW9uICgpIHtcbiAgICAkKFwiI3VzZXJQaG9uZVwiKS5pbnB1dG1hc2soKTtcbiAgfSk7XG5cbn1cblxuXG5cbmlmIChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmFkZC1mZWVkYmFja1wiKSkge1xuICBjb25zdCBkYXJrTGF5ZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmRhcmstbGF5ZXJcIik7XG4gIGNvbnN0IGFwcGx5QnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5hZGQtZmVlZGJhY2tcIik7XG4gIGNvbnN0IGNsb3NlRm9ybSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiY2xvc2VGb3JtXCIpO1xuICBjb25zdCBhcHBseUZvcm1TY3JlZW4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImFwcGx5Rm9ybVwiKTtcbiAgYXBwbHlCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcblxuICAgIGRhcmtMYXllci5jbGFzc0xpc3QudG9nZ2xlKFwianMtLWhpZGRlblwiKTtcbiAgfSlcblxuICBjbG9zZUZvcm0uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICBkYXJrTGF5ZXIuY2xhc3NMaXN0LnRvZ2dsZShcImpzLS1oaWRkZW5cIik7XG4gIH0pO1xuXG4gIHdpbmRvdy5vbmNsaWNrID0gZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgaWYgKGV2ZW50LnRhcmdldCA9PSBkYXJrTGF5ZXIpIHtcbiAgICAgIGRhcmtMYXllci5jbGFzc0xpc3QudG9nZ2xlKFwianMtLWhpZGRlblwiKTtcbiAgICB9XG4gIH07XG59XG5jb25zdCBucyA9ICdodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Zyc7XG5cbmlmIChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZmVlZGJhY2staXRlbScpKSB7XG4gIGNvbnN0IHJldmlld3MgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuZmVlZGJhY2staXRlbScpO1xuICByZXZpZXdzLmZvckVhY2gocmV2aWV3ID0+IHtcbiAgICBsZXQgcmV2aWV3X2NvbnRlbnQgPSByZXZpZXcucXVlcnlTZWxlY3RvcignLmZlZWRiYWNrLWl0ZW1fX2NvbnRlbnQnKS50ZXh0Q29udGVudDtcbiAgICBjb25zdCBiYXRoX3R5cGVfbmFtZSA9IHJldmlldy5xdWVyeVNlbGVjdG9yKCcuZmVlZGJhY2staXRlbV9fY2FwdGlvbicpO1xuICAgIGNvbnN0IHN0YXJfcmF0aW5nX2Ftb3VudCA9IHJldmlldy5xdWVyeVNlbGVjdG9yKCcuYW1vdW50Jyk7XG4gICAgY29uc3Qgc3Rhcl9yYXRpbmcgPSByZXZpZXdfY29udGVudC5zdWJzdHJpbmcocmV2aWV3X2NvbnRlbnQuaW5kZXhPZihcInN0YXJcIikgLSAxLCByZXZpZXdfY29udGVudC5pbmRleE9mKFwic3RhclwiKSk7XG4gICAgY29uc3QgYmF0aF90eXBlID0gcmV2aWV3X2NvbnRlbnQuc3Vic3RyaW5nKHJldmlld19jb250ZW50LmluZGV4T2YoXCJiYXRoXCIpIC0gMywgcmV2aWV3X2NvbnRlbnQuaW5kZXhPZihcImJhdGhcIikpO1xuICAgIHJldmlld19jb250ZW50ID0gcmV2aWV3X2NvbnRlbnQucmVwbGFjZShgJHtiYXRoX3R5cGV9YmF0aGAsICcnKVxuICAgIHJldmlld19jb250ZW50ID0gcmV2aWV3X2NvbnRlbnQucmVwbGFjZShgJHtzdGFyX3JhdGluZ31zdGFyYCwgJycpXG4gICAgcmV2aWV3LnF1ZXJ5U2VsZWN0b3IoJy5mZWVkYmFjay1pdGVtX19jb250ZW50JykudGV4dENvbnRlbnQgPSByZXZpZXdfY29udGVudDtcbiAgICBzdGFyX3JhdGluZ19hbW91bnQudGV4dENvbnRlbnQgPSBzdGFyX3JhdGluZ1xuICAgIGJhdGhfdHlwZV9uYW1lLnRleHRDb250ZW50ID0gYmF0aF90eXBlXG4gICAgc3dpdGNoIChiYXRoX3R5cGUpIHtcbiAgICAgIGNhc2UgJ9Cj0YDQsCc6XG4gICAgICAgIGJhdGhfdHlwZV9uYW1lLnRleHRDb250ZW50ID0gJ9Cj0YDQsNC70YzRgdC60LDRjydcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICfQntGF0L4nOlxuICAgICAgICBiYXRoX3R5cGVfbmFtZS50ZXh0Q29udGVudCA9ICfQntGF0L7RgtC90LjRh9GM0Y8nXG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAn0K/QvNGBJzpcbiAgICAgICAgYmF0aF90eXBlX25hbWUudGV4dENvbnRlbnQgPSAn0K/QvNGB0LrQsNGPJ1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ9Cg0YvQsSc6XG4gICAgICAgIGJhdGhfdHlwZV9uYW1lLnRleHRDb250ZW50ID0gJ9Cg0YvQsdCw0YbQutCw0Y8nXG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAn0KDQsNC3JzpcbiAgICAgICAgYmF0aF90eXBlX25hbWUudGV4dENvbnRlbnQgPSAn0KDQsNC30LTQvtC70YzQvdCw0Y8nXG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAn0KHQtdC8JzpcbiAgICAgICAgYmF0aF90eXBlX25hbWUudGV4dENvbnRlbnQgPSAn0KHQtdC80LXQudC90LDRjydcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICfQodC40LEnOlxuICAgICAgICBiYXRoX3R5cGVfbmFtZS50ZXh0Q29udGVudCA9ICfQodC40LHQuNGA0YHQutCw0Y8nXG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAn0JvQtdGBJzpcbiAgICAgICAgYmF0aF90eXBlX25hbWUudGV4dENvbnRlbnQgPSAn0JvQtdGB0L3QsNGPJ1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ9Cl0YPRgic6XG4gICAgICAgIGJhdGhfdHlwZV9uYW1lLnRleHRDb250ZW50ID0gJ9Cl0YPRgtC+0YDQvtC6J1xuICAgICAgICBicmVhaztcbiAgICB9XG4gICAgY29uc3QgcmV2aWV3U3RhcnMgPSByZXZpZXcucXVlcnlTZWxlY3RvcignLmZlZWRiYWNrLWl0ZW1fX3JhdGluZycpLnF1ZXJ5U2VsZWN0b3IoXCJzdmdcIik7XG5cbiAgICBzd2l0Y2ggKHN0YXJfcmF0aW5nKSB7XG4gICAgICBjYXNlICcxJzpcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCA1IC0gcGFyc2VJbnQoc3Rhcl9yYXRpbmcpOyBpKyspIHtcbiAgICAgICAgICByZXZpZXdTdGFycy5yZW1vdmVDaGlsZChyZXZpZXcucXVlcnlTZWxlY3Rvcignc3ZnIHVzZScpKTtcbiAgICAgICAgfVxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IDUgLSBwYXJzZUludChzdGFyX3JhdGluZyk7IGkrKykge1xuICAgICAgICAgIGNvbnN0IHVzZUVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50TlMobnMsICd1c2UnKTtcbiAgICAgICAgICB1c2VFbGVtZW50LnNldEF0dHJpYnV0ZSgnaHJlZicsICcjc3RhcnMtZW1wdHktc3RhcicpO1xuICAgICAgICAgIHJldmlld1N0YXJzLmFwcGVuZENoaWxkKHVzZUVsZW1lbnQpXG4gICAgICAgIH1cbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICcyJzpcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCA1IC0gcGFyc2VJbnQoc3Rhcl9yYXRpbmcpOyBpKyspIHtcbiAgICAgICAgICByZXZpZXdTdGFycy5yZW1vdmVDaGlsZChyZXZpZXcucXVlcnlTZWxlY3Rvcignc3ZnIHVzZScpKTtcbiAgICAgICAgfVxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IDUgLSBwYXJzZUludChzdGFyX3JhdGluZyk7IGkrKykge1xuICAgICAgICAgIGNvbnN0IHVzZUVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50TlMobnMsICd1c2UnKTtcbiAgICAgICAgICB1c2VFbGVtZW50LnNldEF0dHJpYnV0ZSgnaHJlZicsICcjc3RhcnMtZW1wdHktc3RhcicpO1xuICAgICAgICAgIHJldmlld1N0YXJzLmFwcGVuZENoaWxkKHVzZUVsZW1lbnQpXG4gICAgICAgIH1cbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICczJzpcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCA1IC0gcGFyc2VJbnQoc3Rhcl9yYXRpbmcpOyBpKyspIHtcbiAgICAgICAgICByZXZpZXdTdGFycy5yZW1vdmVDaGlsZChyZXZpZXcucXVlcnlTZWxlY3Rvcignc3ZnIHVzZScpKTtcbiAgICAgICAgfVxuICAgICAgICBmb3IgKGxldCBpID0gMTsgaSA8PSA1IC0gcGFyc2VJbnQoc3Rhcl9yYXRpbmcpOyBpKyspIHtcbiAgICAgICAgICBsZXQgdXNlRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUyhucywgJ3VzZScpO1xuICAgICAgICAgIHVzZUVsZW1lbnQuc2V0QXR0cmlidXRlKCdocmVmJywgJyNzdGFycy1lbXB0eS1zdGFyJyk7XG4gICAgICAgICAgcmV2aWV3U3RhcnMuYXBwZW5kQ2hpbGQodXNlRWxlbWVudClcbiAgICAgICAgfVxuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJzQnOlxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IDUgLSBwYXJzZUludChzdGFyX3JhdGluZyk7IGkrKykge1xuICAgICAgICAgIHJldmlld1N0YXJzLnJlbW92ZUNoaWxkKHJldmlldy5xdWVyeVNlbGVjdG9yKCdzdmcgdXNlJykpO1xuICAgICAgICB9XG4gICAgICAgIGZvciAobGV0IGkgPSAxOyBpIDw9IDUgLSBwYXJzZUludChzdGFyX3JhdGluZyk7IGkrKykge1xuICAgICAgICAgIGNvbnN0IHVzZUVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50TlMobnMsICd1c2UnKTtcbiAgICAgICAgICB1c2VFbGVtZW50LnNldEF0dHJpYnV0ZSgnaHJlZicsICcjc3RhcnMtZW1wdHktc3RhcicpO1xuICAgICAgICAgIHJldmlld1N0YXJzLmFwcGVuZENoaWxkKHVzZUVsZW1lbnQpXG4gICAgICAgIH1cbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICc1JzpcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCA1IC0gcGFyc2VJbnQoc3Rhcl9yYXRpbmcpOyBpKyspIHtcbiAgICAgICAgICByZXZpZXdTdGFycy5yZW1vdmVDaGlsZChyZXZpZXcucXVlcnlTZWxlY3Rvcignc3ZnIHVzZScpKTtcbiAgICAgICAgfVxuICAgICAgICBmb3IgKGxldCBpID0gMTsgaSA8PSA1IC0gcGFyc2VJbnQoc3Rhcl9yYXRpbmcpOyBpKyspIHtcbiAgICAgICAgICBjb25zdCB1c2VFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKG5zLCAndXNlJyk7XG4gICAgICAgICAgdXNlRWxlbWVudC5zZXRBdHRyaWJ1dGUoJ2hyZWYnLCAnI3N0YXJzLWVtcHR5LXN0YXInKTtcbiAgICAgICAgICByZXZpZXdTdGFycy5hcHBlbmRDaGlsZCh1c2VFbGVtZW50KVxuICAgICAgICB9XG4gICAgICAgIGJyZWFrO1xuICAgIH1cbiAgfSlcbn1cblxuXG5jb25zdCBncmVldGluZ1N3aXBlciA9IG5ldyBTd2lwZXIoXCIjZ3JlZXRpbmdTd2lwZXJcIiwge1xuICAvLyBPcHRpb25hbCBwYXJhbWV0ZXJzXG4gIGRpcmVjdGlvbjogXCJob3Jpem9udGFsXCIsXG4gIGxvb3A6IHRydWUsXG5cbiAgLy8gSWYgd2UgbmVlZCBwYWdpbmF0aW9uXG4gIHBhZ2luYXRpb246IHtcbiAgICBlbDogXCIuc3dpcGVyLXBhZ2luYXRpb25cIixcblxuICAgIGNsaWNrYWJsZTogdHJ1ZSxcbiAgfSxcblxuICAvLyBOYXZpZ2F0aW9uIGFycm93c1xuICBuYXZpZ2F0aW9uOiB7XG4gICAgbmV4dEVsOiBcIi5zd2lwZXItYnV0dG9uLW5leHRcIixcbiAgICBwcmV2RWw6IFwiLnN3aXBlci1idXR0b24tcHJldlwiLFxuICB9LFxufSk7XG5cbmNvbnN0IG1lbnVUb2dnbGVycyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuY29udGVudC10b2dnbGVyXCIpO1xuY29uc3Qgc2NyZWVucyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuYWRhcHRpdmUtc2NyZWVuXCIpO1xuLy8gY29uc3Qgc2VydmljZUJ1dHRvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwic2VydmljZUJ1dHRvblwiKTtcbi8vIGNvbnN0IHNob3BCdXR0b24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInNob3BCdXR0b25cIik7XG5cbmNvbnN0IG1lbnVCdXR0b25zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5idXR0b24tdG9nZ2xlclwiKTtcbm1lbnVUb2dnbGVycy5mb3JFYWNoKHRvZ2dsZXIgPT4ge1xuICB0b2dnbGVyLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgbWVudVRvZ2dsZXJzLmZvckVhY2goYnV0dG9uID0+IHtcbiAgICAgIGlmIChidXR0b24uY2xhc3NMaXN0LmNvbnRhaW5zKFwiY29udGVudC10b2dnbGVyLS1hY3RpdmVcIikpIHtcbiAgICAgICAgYnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUoXCJjb250ZW50LXRvZ2dsZXItLWFjdGl2ZVwiKTtcbiAgICAgIH1cbiAgICB9KVxuICAgIHRvZ2dsZXIuY2xhc3NMaXN0LmFkZChcImNvbnRlbnQtdG9nZ2xlci0tYWN0aXZlXCIpO1xuICAgIHNob3dTY3JlZW4odG9nZ2xlci5pZClcbiAgICBtZW51QnV0dG9ucy5mb3JFYWNoKGJ1dHRvbiA9PiB7XG4gICAgICBpZiAoYnV0dG9uLmNsYXNzTGlzdC5jb250YWlucyhcImJ1dHRvbi10b2dnbGVyLS1hY3RpdmVcIikpIHtcblxuICAgICAgICBidXR0b24uY2xhc3NMaXN0LnJlbW92ZShcImJ1dHRvbi10b2dnbGVyLS1hY3RpdmVcIik7XG4gICAgICB9XG4gICAgICBjb25zdCBidXR0b25JRCA9IGJ1dHRvbi5pZDtcbiAgICAgIGlmIChidXR0b25JRC5pbmNsdWRlcygnc2VydmljZScpKSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChidXR0b25JRCkuY2xhc3NMaXN0LmFkZChcImJ1dHRvbi10b2dnbGVyLS1hY3RpdmVcIilcblxuICAgIH0pXG4gIH0pXG59KVxuXG5cbmZ1bmN0aW9uIHNob3dTY3JlZW4odG9nZ2xlcklEKSB7XG4gIHNjcmVlbnMuZm9yRWFjaChzY3JlZW4gPT4ge1xuICAgIGlmIChzY3JlZW4uY2xhc3NMaXN0LmNvbnRhaW5zKFwic2NyZWVuLWFjdGl2ZVwiKSkge1xuICAgICAgc2NyZWVuLmNsYXNzTGlzdC5yZW1vdmUoXCJzY3JlZW4tYWN0aXZlXCIpO1xuICAgICAgc2NyZWVuLmNsYXNzTGlzdC5hZGQoJ3NjcmVlbi1oaWRkZW4nKTtcbiAgICB9XG4gICAgY29uc3Qgc2NyZWVuSUQgPSBzY3JlZW4uaWQ7XG4gICAgaWYgKHNjcmVlbklELmluY2x1ZGVzKHRvZ2dsZXJJRCkpIHtcbiAgICAgIHNjcmVlbi5jbGFzc0xpc3QuYWRkKFwic2NyZWVuLWFjdGl2ZVwiKTtcbiAgICAgIHNjcmVlbi5jbGFzc0xpc3QucmVtb3ZlKCdzY3JlZW4taGlkZGVuJyk7XG4gICAgfVxuICB9KVxufVxuXG5tZW51QnV0dG9ucy5mb3JFYWNoKGJ1dHRvbiA9PiB7XG4gIGJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgIGNvbnNvbGUubG9nKCgnY2xpY2tlZCcpKTtcbiAgICBtZW51QnV0dG9ucy5mb3JFYWNoKHNwZWNpYWxCdXR0b24gPT4ge1xuICAgICAgaWYgKHNwZWNpYWxCdXR0b24uY2xhc3NMaXN0LmNvbnRhaW5zKFwiYnV0dG9uLXRvZ2dsZXItLWFjdGl2ZVwiKSkge1xuICAgICAgICBjb25zb2xlLmxvZyhcImNoYW5nZWRcIilcbiAgICAgICAgc3BlY2lhbEJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKFwiYnV0dG9uLXRvZ2dsZXItLWFjdGl2ZVwiKTtcbiAgICAgIH1cbiAgICB9KVxuICAgIGlmICghYnV0dG9uLmNsYXNzTGlzdC5jb250YWlucyhcImJ1dHRvbi10b2dnbGVyLS1hY3RpdmVcIikpIHtcbiAgICAgIGJ1dHRvbi5jbGFzc0xpc3QuYWRkKFwiYnV0dG9uLXRvZ2dsZXItLWFjdGl2ZVwiKTtcbiAgICB9XG4gICAgaWYgKGJ1dHRvbi5pZC5pbmNsdWRlcyhcInNlcnZpY2VcIikpIHtcbiAgICAgIHNob3dTY3JlZW4oXCJrYXJkYW5cIik7XG4gICAgICBtZW51VG9nZ2xlcnMuZm9yRWFjaChidXR0b24gPT4ge1xuICAgICAgICBpZiAoYnV0dG9uLmNsYXNzTGlzdC5jb250YWlucyhcImNvbnRlbnQtdG9nZ2xlci0tYWN0aXZlXCIpKSB7XG4gICAgICAgICAgYnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUoXCJjb250ZW50LXRvZ2dsZXItLWFjdGl2ZVwiKTtcbiAgICAgICAgfVxuICAgICAgfSlcbiAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwia2FyZGFuXCIpLmNsYXNzTGlzdC5hZGQoJ2NvbnRlbnQtdG9nZ2xlci0tYWN0aXZlJylcbiAgICB9IGVsc2Uge1xuICAgICAgc2hvd1NjcmVlbihcInNob3BcIik7XG4gICAgfVxuICB9KVxufSlcblxuLy8gaWYgKHdpbmRvdy5sb2NhdGlvbi5ocmVmLmluY2x1ZGVzKFwiY29udGFjdFwiKSkge1xuLy8gICB5bWFwcy5yZWFkeShpbml0KTtcblxuLy8gICBmdW5jdGlvbiBpbml0KCkge1xuLy8gICAgIHZhciBteU1hcCA9IG5ldyB5bWFwcy5NYXAoJ21hcCcsIHtcbi8vICAgICAgIGNlbnRlcjogWzU2LjgxMTIyMzU1LCA2MC43Mjc2MzcwOF0sXG4vLyAgICAgICB6b29tOiAxNFxuLy8gICAgIH0pLFxuXG4vLyAgICAgICBteVBsYWNlbWFyayA9IG5ldyB5bWFwcy5QbGFjZW1hcmsobXlNYXAuZ2V0Q2VudGVyKCksIHtcbi8vICAgICAgICAgYmFsbG9vbkNvbnRlbnQ6ICfQsy4g0JjRgNC60YPRgtGB0LosINGD0LsuINCh0YPRgNC90L7QstCwLCAyMCcsXG4vLyAgICAgICAgIGljb25DYXB0aW9uOiAn0LMuINCY0YDQutGD0YLRgdC6LCDRg9C7LiDQodGD0YDQvdC+0LLQsCwgMjAnLFxuLy8gICAgICAgfSwge1xuLy8gICAgICAgICBpY29uTGF5b3V0OiAnZGVmYXVsdCNpbWFnZScsXG4vLyAgICAgICAgIGljb25JbWFnZUhyZWY6IFwiLi9hc3NldHMvaW1hZ2VzL2NvbnRlbnQvbG9nb19jdXN0b20uc3ZnXCIsXG4vLyAgICAgICAgIGljb25JbWFnZVNpemU6IFszMCwgNDJdLFxuLy8gICAgICAgICBpY29uSW1hZ2VPZmZzZXQ6IFstNSwgLTM4XSxcbi8vICAgICAgIH0pXG5cbi8vICAgICBteU1hcC5nZW9PYmplY3RzXG4vLyAgICAgICAuYWRkKG15UGxhY2VtYXJrKTtcbi8vICAgfVxuLy8gfSIsImpRdWVyeShcIiNzbGlkZXJcIikuc2xpZGVyKHtcbiAgICBhbmltYXRlOiBcImZhc3RcIixcbiAgICBtYXg6IDUsXG4gICAgbWluOiAxLFxuICAgIHN0ZXA6IDEsXG4gICAgcmFuZ2U6IHRydWUsXG4gICAgdmFsdWVzOiBbMSwgNV0sXG4gICAgc2xpZGU6IGZ1bmN0aW9uIChldmVudCwgdWkpIHtcbiAgICAgICAgJChcIiNzdGFyUmF0aW5nXCIpLnZhbCh1aS52YWx1ZSk7XG4gICAgICAgICQoXCIuY29udHJvbHMtc2VjdGlvbl9fYnV0dG9uXCIpLnJlbW92ZUNsYXNzKFwianMtLWhpZGRlblwiKTtcbiAgICAgICAgZmlsdGVyRmVlZGJhY2tzQnlSYXRpbmcoKVxuICAgIH1cbn0pO1xuXG5pZiAoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJyYXRpbmdGb3JtXCIpKSB7XG4gICAgY29uc3QgZm9ybSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicmF0aW5nRm9ybVwiKTtcbiAgICBjb25zdCBzZWxlY3QgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImJhdGhUeXBlXCIpO1xuICAgIGZvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInJlc2V0XCIsICgpID0+IHtcbiAgICAgICAgJChcIiNzbGlkZXJcIikuc2xpZGVyKFwidmFsdWVzXCIsIFsxLCA1XSlcbiAgICAgICAgJChcIi5jb250cm9scy1zZWN0aW9uX19idXR0b25cIikuYWRkQ2xhc3MoXCJqcy0taGlkZGVuXCIpO1xuXG4gICAgICAgIHZhciBhbGxGZWVkYmFja3MgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuZmVlZGJhY2staXRlbScpO1xuICAgICAgICBhbGxGZWVkYmFja3MuZm9yRWFjaChmZWVkYmFjayA9PiB7XG5cbiAgICAgICAgICAgIGZlZWRiYWNrLmNsYXNzTGlzdC5yZW1vdmUoXCJqcy0taGlkZGVuXCIpO1xuICAgICAgICB9KTtcbiAgICB9KVxuICAgIHNlbGVjdC5hZGRFdmVudExpc3RlbmVyKFwiY2hhbmdlXCIsICgpID0+IHtcbiAgICAgICAgJChcIi5jb250cm9scy1zZWN0aW9uX19idXR0b25cIikucmVtb3ZlQ2xhc3MoXCJqcy0taGlkZGVuXCIpXG4gICAgICAgIHZhciBjaGVja2VkT3B0aW9uID0gJChzZWxlY3QpLnZhbCgpO1xuICAgICAgICBmaWx0ZXJGZWVkYmFja3NCeU5hbWUoY2hlY2tlZE9wdGlvbilcbiAgICB9KTtcbn1cblxuZnVuY3Rpb24gZmlsdGVyRmVlZGJhY2tzQnlSYXRpbmcoKSB7XG4gICAgdmFyIGFsbEZlZWRiYWNrcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5mZWVkYmFjay1pdGVtJyk7XG4gICAgdmFyIHN0YXJSYXRpbmcgPSAkKFwiI3NsaWRlclwiKS5zbGlkZXIoXCJ2YWx1ZXNcIik7XG5cbiAgICBhbGxGZWVkYmFja3MuZm9yRWFjaChmZWVkYmFjayA9PiB7XG4gICAgICAgIGlmIChmZWVkYmFjay5xdWVyeVNlbGVjdG9yKFwiLmFtb3VudFwiKS50ZXh0Q29udGVudCAhPVxuICAgICAgICAgICAgJChcIiNzdGFyUmF0aW5nXCIpLnZhbCgpKSB7XG4gICAgICAgICAgICBmZWVkYmFjay5jbGFzc0xpc3QuYWRkKFwianMtLWhpZGRlblwiKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGZlZWRiYWNrLmNsYXNzTGlzdC5yZW1vdmUoXCJqcy0taGlkZGVuXCIpO1xuICAgICAgICB9XG4gICAgfSlcblxufVxuZnVuY3Rpb24gZmlsdGVyRmVlZGJhY2tzQnlOYW1lKGNoZWNrZWRWYWx1ZSkge1xuICAgIHZhciBhbGxGZWVkYmFja3MgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuZmVlZGJhY2staXRlbScpO1xuICAgIGFsbEZlZWRiYWNrcy5mb3JFYWNoKGZlZWRiYWNrID0+IHtcblxuICAgICAgICBpZiAoZmVlZGJhY2sucXVlcnlTZWxlY3RvcihcIi5mZWVkYmFjay1pdGVtX19jYXB0aW9uXCIpLnRleHRDb250ZW50ICE9IGNoZWNrZWRWYWx1ZSkge1xuICAgICAgICAgICAgZmVlZGJhY2suY2xhc3NMaXN0LmFkZChcImpzLS1oaWRkZW5cIik7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBmZWVkYmFjay5jbGFzc0xpc3QucmVtb3ZlKFwianMtLWhpZGRlblwiKTtcbiAgICAgICAgfVxuICAgIH0pXG59IiwiY29uc3Qgc3dpcGVyID0gbmV3IFN3aXBlcignI3dvcmtlclN3aXBlcicsIHtcbiAgICAvLyBPcHRpb25hbCBwYXJhbWV0ZXJzXG4gICAgZGlyZWN0aW9uOiAnaG9yaXpvbnRhbCcsXG4gICAgbG9vcDogdHJ1ZSxcbiAgICBzcGVlZDogNDAwLFxuICAgIHNwYWNlQmV0d2VlbjogMzQsXG4gICAgZWZmZWN0OiAnY2FyZHMnLFxuICAgIHNsaWRlc1BlclZpZXc6ICc0JyxcbiAgICBzd2lwZUhhbmRsZXI6ICcuc3dpcGVyLXdyYXBwZXInLFxufSk7XG5jb25zdCBzd2lwZXJJbWFnZXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLmJhdGhyb29tLXByZXZpZXdcIik7XG5sZXQgaW1nTGlua0FycmF5ID0gbmV3IEFycmF5KCk7XG5sZXQgcmV0dXJuVmFsdWUgPSAwO1xuc3dpcGVySW1hZ2VzLmZvckVhY2goaW1hZ2UgPT4ge1xuICAgIGNvbnN0IGltYWdlU3JjID0gaW1hZ2Uuc3JjLnJlcGxhY2UoXCJodHRwOi8vbG9jYWxob3N0OjMwMDBcIiwgXCIuXCIpO1xuICAgIHZhciByZXR1cm5WYWx1ZSA9IGA8aW1nIGNsYXNzPVwic3dpcGVyLXByZXZpZXcgc3dpcGVyLXBhZ2luYXRpb24tYnVsbGV0XCIgc3JjPSR7aW1hZ2VTcmN9PmA7XG4gICAgaW1nTGlua0FycmF5LnB1c2gocmV0dXJuVmFsdWUpXG59KVxuXG5jb25zdCBmYW5jeVN3aXBlciA9IG5ldyBTd2lwZXIoJyNmYW5jeVN3aXBlcicsIHtcbiAgICBkaXJlY3Rpb246ICdob3Jpem9udGFsJyxcbiAgICBsb29wOiB0cnVlLFxuICAgIHNwZWVkOiA1MDAsXG4gICAgc3BhY2VCZXR3ZWVuOiAzNCxcbiAgICBlZmZlY3Q6ICdmYWRlJyxcbiAgICBmYWRlRWZmZWN0OiB7XG4gICAgICAgIGNyb3NzRmFkZTogdHJ1ZVxuICAgIH0sXG4gICAgc2xpZGVzUGVyVmlldzogJzEnLFxuICAgIHN3aXBlSGFuZGxlcjogJy5zd2lwZXItd3JhcHBlcicsXG4gICAgcGFnaW5hdGlvbjoge1xuICAgICAgICBlbDogJy5zd2lwZXItcGFnaW5hdGlvbicsXG4gICAgICAgIGNsaWNrYWJsZTogdHJ1ZSxcbiAgICAgICAgcmVuZGVyQnVsbGV0OiBmdW5jdGlvbiAoaW5kZXgpIHtcbiAgICAgICAgICAgIHJldHVybiBpbWdMaW5rQXJyYXlbaW5kZXhdO1xuICAgICAgICB9LFxuICAgIH1cbn0pO1xuXG5jb25zdCBjYWZlU3dpcGVyID0gbmV3IFN3aXBlcignI2NhZmVTd2lwZXInLCB7XG4gICAgLy8gT3B0aW9uYWwgcGFyYW1ldGVyc1xuICAgIGRpcmVjdGlvbjogJ2hvcml6b250YWwnLFxuICAgIGxvb3A6IGZhbHNlLFxuICAgIHNwZWVkOiA0MDAsXG4gICAgc3BhY2VCZXR3ZWVuOiAyNCxcbiAgICBlZmZlY3Q6ICdjYXJkcycsXG4gICAgc2xpZGVzUGVyVmlldzogJzInLFxuICAgIC8vIHN3aXBlSGFuZGxlcjogJy5zd2lwZXItd3JhcHBlcicsXG4gICAgcGFnaW5hdGlvbjoge1xuICAgICAgICBlbDogJy5zd2lwZXItcGFnaW5hdGlvbicsXG4gICAgICAgIGNsaWNrYWJsZTogdHJ1ZVxuICAgIH0sXG5cbiAgICAvLyBOYXZpZ2F0aW9uIGFycm93c1xuICAgIG5hdmlnYXRpb246IHtcbiAgICAgICAgbmV4dEVsOiAnLnN3aXBlci1idXR0b24tbmV4dCcsXG4gICAgICAgIHByZXZFbDogJy5zd2lwZXItYnV0dG9uLXByZXYnLFxuICAgIH0sXG59KTtcblxuY29uc3QgYWN0aW9uU3dpcGVyID0gbmV3IFN3aXBlcignI2FjdGlvblN3aXBlcicsIHtcbiAgICAvLyBPcHRpb25hbCBwYXJhbWV0ZXJzXG4gICAgZGlyZWN0aW9uOiAnaG9yaXpvbnRhbCcsXG4gICAgbG9vcDogdHJ1ZSxcbiAgICBzcGVlZDogNDAwLFxuICAgIHNwYWNlQmV0d2VlbjogMjQsXG4gICAgZWZmZWN0OiAnY2FyZHMnLFxuICAgIHNsaWRlc1BlclZpZXc6ICcyJyxcblxuICAgIC8vIE5hdmlnYXRpb24gYXJyb3dzXG4gICAgbmF2aWdhdGlvbjoge1xuICAgICAgICBuZXh0RWw6ICcuc3dpcGVyLWJ1dHRvbi1uZXh0JyxcbiAgICAgICAgcHJldkVsOiAnLnN3aXBlci1idXR0b24tcHJldicsXG4gICAgfSxcbn0pOyJdfQ==
